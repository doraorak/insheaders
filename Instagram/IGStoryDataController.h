//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.468, BuildCommit: a1243d3a18f9b0e29af55a12ad74ccd2cd1f0abc)
//
//    - LC_BUILD_VERSION:  Platform: iOS, MinOS: 15.0, SDK: 17.4, Tool: ld (16.0)
//    - LC_SOURCE_VERSION: 
//
#ifndef IGStoryDataController_h
#define IGStoryDataController_h
@import Foundation;

#include "FBCancelable-Protocol.h"
#include "IGFlashStoriesCacheController.h"
#include "IGListDiffable-Protocol.h"
#include "IGLivePostLiveCollectionModel.h"
#include "IGRequestToken-Protocol.h"
#include "IGScopedListener-Protocol.h"
#include "IGStoryChainingProtocol-Protocol.h"
#include "IGStoryDataControllerSessionDeps.h"
#include "IGStoryDataRequestBuilder.h"
#include "IGStoryDeliveryPersonalizationInfo.h"
#include "IGStoryMediaResponseParser.h"
#include "IGStoryPublishingManager.h"
#include "IGStoryTrayResponseParser.h"
#include "IGStoryTrayTailResponseParser.h"

@class FBGraphQLServiceToken, IGPostCreationManager, IGStory, IGStoryRollCallConfig, IGTimeBoundCache, IGUserSessionProvider, NSArray, NSDate, NSMutableArray, NSMutableDictionary, NSMutableSet, NSNumber, NSObject, NSString, PNPandoGraphQLService;
@protocol IGStoryChainingAnnouncer, IGStoryDataControllerAnnouncer, IGStoryDataControllerNewAREffectNuxVersionAnnouncer, IGStoryDataControllerStoryPreloadAnnouncer, OS_dispatch_queue;

@interface IGStoryDataController : NSObject<IGListDiffable, IGStoryChainingProtocol, IGScopedListener> {
  /* instance variables */
  NSObject *_lock;
  IGStoryDataRequestBuilder *_requestBuilder;
  NSArray *_trayViewModels;
  NSObject<IGStoryChainingAnnouncer> *_storyChainingAnnouncer;
  NSObject<IGStoryDataControllerStoryPreloadAnnouncer> *_storyPreloadAnnouncer;
  NSObject<IGStoryDataControllerAnnouncer> *_announcer;
  NSObject<IGStoryDataControllerNewAREffectNuxVersionAnnouncer> *_arEffectNuxVersionAnnouncer;
  NSMutableDictionary *_reelPkToStoryItemAnnouncer;
  NSMutableDictionary *_userPkToBroadcastItemAnnouncer;
  NSMutableDictionary *_userPkToPostLiveItemAnnouncer;
  NSNumber *_trayFetchRequestDeliveryLoggingKey;
  NSNumber *_mediaFetchRequestDeliveryLoggingKey;
  NSObject<IGRequestToken> *_trayPaginatedTailRequestToken;
  NSNumber *_trayPaginatedTailRequestDeliveryLoggingKey;
  NSString *_storyRankToken;
  double _lastTrayFetchUpdateDuration;
  IGStoryPublishingManager *_reelPublishingManager;
  BOOL _shouldSendPreloadedReelsInTrayFetch;
  NSMutableSet *_privacyCheckedReelIds;
  BOOL _trayPaginationIsEnabled;
  long long _pageSize;
  long long _nextPageSize;
  BOOL _allowPullToRefreshBetweenTrayStreamingChunks;
  long long _serverDefinedTrayLookaheadFetchCount;
  BOOL _serverDrivenPaginationEnabled;
  NSString *_cursor;
  BOOL _isStoriesPrefetchEnabled;
  BOOL _shouldPreloadMedia;
  NSObject<OS_dispatch_queue> *_streamingCallbackQueue;
  BOOL _isSelfStoryCurrentlyPosting;
  IGPostCreationManager *_postCreationManagerLazy;
  IGUserSessionProvider *_userSessionProvider;
  NSString *_traySessionId;
  id /* block */ _backgroundPrefetchCompletionHandler;
  NSString *_followingTraySessionID;
  NSDate *_dateOfLastFetch;
  BOOL _trayHypeSubscriptionEnabled;
  FBGraphQLServiceToken *_pandoGraphQLToken;
  PNPandoGraphQLService *_pandoGraphQLService;
  IGStoryTrayResponseParser *_parser;
  IGStoryTrayTailResponseParser *_tailParser;
  IGStoryMediaResponseParser *_mediaParser;
  NSMutableArray *_headLoadDeliveredIDs;
  NSObject<OS_dispatch_queue> *_backgroundQueue;
  BOOL _hasSuperlative;
  BOOL _didCompleteMediaPrefetch;
  NSString *_feedLastSeenMediaID;
  long long _lastRefreshType;
  IGStoryRollCallConfig *_rollCallStoryConfig;
  NSArray *_quickSnaps;
  IGTimeBoundCache *_userMediaCache;
  IGStory *_currentUserReel;
  NSArray *_traySortDescriptors;
  NSMutableSet *_loadingReelPKs;
  NSMutableSet *_loadingMediaPreviewPKs;
  NSArray *_followingTrayReels;
  NSArray *_sortedReelPKs;
  NSArray *_sortedHeadLoadReelPKs;
  IGStoryDeliveryPersonalizationInfo *_deliveryPersonalizationInfo;
  NSDate *_lastTrayFetchTime;
  double _trayRefreshWindow;
  long long _lastTrayRequestReason;
  NSObject<FBCancelable> *_trayRefreshAfterDelayCancelToken;
  IGStoryDataControllerSessionDeps *_sessionDeps;
  IGFlashStoriesCacheController *_flashStoriesCacheController;
}

@property (retain, nonatomic) NSArray *trayReels;
@property (retain, nonatomic) NSArray *broadcasts;
@property (retain, nonatomic) IGLivePostLiveCollectionModel *postLiveCollectionModel;
@property (nonatomic) BOOL skipClientSortingForTrayViewModels;
@property (nonatomic) BOOL isStoryViewerGestureNuxEligible;
@property BOOL isLoading;
@property BOOL waitingForFirstLoad;
@property BOOL didLastHeadLoadFetchFail;
@property BOOL isPaginationRequestLoading;
@property BOOL didLastPaginatedTailFetchFail;
@property (retain) NSNumber *lastDeliveryLoggingKey;
@property (readonly, nonatomic) double timeSinceLastFetch;
@property (readonly, copy, nonatomic) NSArray *reelIDsToFetchOnPagination;
@property (readonly, nonatomic) long long viewerLookaheadFetchCount;
@property (readonly, nonatomic) long long trayLookaheadFetchCount;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@optional
@property (readonly, copy) NSString *debugDescription;

/* instance methods */
- (id)initWithStoryDataControllerSessionDeps:(id)deps;
- (void)_parserInitialization;
- (void)_performFetchPaginatedTrayTail;
- (void)addListener:(id)listener;
- (void)addStoryChainingListener:(id)listener;
- (void)removeStoryChainingListener:(id)listener;
- (id)allReelPksInTopTraysUsingCachedValue:(BOOL)value;
- (void)removeEmptyStateStory;
- (void)_performFetchItemsForReelsWithReelPKs:(id)pks containerModule:(id)module mediaID:(id)id injectMediaAtBeginning:(BOOL)beginning reason:(long long)reason extraParams:(id)params;
- (void)_performFetchReelAndBroadcastForReelPK:(id)pk andUserPK:(id)pk containerModule:(id)module useCachedMedia:(BOOL)media;
- (void)liveBroadcastUpdated:(id)updated;
- (void)liveBroadcastDeleted:(id)deleted;
- (void)announceUpdatesForStoryReels:(id)reels;
- (void)reelPublishingManager:(id)manager didStartUploadingReel:(id)reel;
- (void)reelPublishingManager:(id)manager didUpdateReel:(id)reel;
- (void)reelPublishingManager:(id)manager didPostFeedItem:(id)item videoFileURL:(id)url mediaDate:(id)date;
- (id)diffIdentifier;
- (BOOL)isEqualToDiffableObject:(id)object;
- (void)didUpdateMembersForPrivateList:(id)list members:(id)members;
- (void)didUpdatePrivateLists:(id)lists;
- (void)didUpdateSelectedPrivateList;
- (void)didEditOrDeletePrivateList;
- (void)_handleFacepileUpdatePayload:(id)payload;
- (void)storyResponseParser:(id)parser hasSuperlative:(BOOL)superlative;
- (void)storyResponseParser:(id)parser updateTrayRefreshWindow:(id)window;
- (void)storyResponseParser:(id)parser isStoryViewerGestureNuxEligible:(BOOL)eligible;
- (void)storyResponseParser:(id)parser setQuickSnaps:(id)snaps;
@end

#endif /* IGStoryDataController_h */
